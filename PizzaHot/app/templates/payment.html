<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmar Pago</title>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
{% include "includes/navbar.html" %}
<div class="container my-5">
    <div class="col" style="margin-right: 250px;margin-left: 250px">
        <div class="text-center">
            <div class="titulo" style="margin-bottom: 20px;">
                <h3>Mercado <span>Pago</span></h3>
            </div>
        </div> 

        <!-- Mercado Pago -->
        <div id="wallet_container"></div>
        
        <!-- Tarjeta/banner -->
        <div class="card text-center mt-4">
            <div class="card-header">
                Gracias {{session.user.first_name}} por preferirnos
            </div>
            <div class="card-body">
                <div class="titulo mb-2">
                    <h3> Gracias <span>por</span> su <span>Compra</span> </h3>
                </div>
                <blockquote class="blockquote">
                    <p>
                        Estamos felices de que formes parte de <br> PizzaHot. Gracias por permanecer y crecer juntos
                    </p>
                </blockquote>
                <a href="{{ url_for('dashboard') }}" class="btn btn-warning">Vuelve a tu orden</a>
                <a href="{{ url_for('information') }}" class="btn btn-warning">Contactanos</a>
            </div>
        </div>
    </div>
</div>
{% include 'includes/footer.html' %}

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous">
</script>

<!--  Mercado Pago -->
<script src="https://sdk.mercadopago.com/js/v2"></script>

<script>
    const preferenceId = "{{preference.id}}"
    const mp = new MercadoPago('TEST-b61b00ab-80b9-4ab9-8381-d19839e3b8d5');
    const bricksBuilder = mp.bricks();

    mp.bricks().create("wallet", "wallet_container", {
        initialization: {
            preferenceId: preferenceId,
            redirectMode: "self",
        },
        callbacks: {
            onReady: () => { },
            onSubmit: () => { },
            onError: (error) => console.error(error),
        },
    });
</script>

</body>
</html>
